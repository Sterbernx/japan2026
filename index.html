<!DOCTYPE html>
<html lang="pl" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <title>üáØüáµ JAPONIA V12 FULL</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@400;600&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gold: '#d4af37',
                        neonGreen: '#39ff14',
                        neonPink: '#ff0055',
                        neonBlue: '#00f2ff',
                        blackBg: '#050505',
                        cardBg: '#121212'
                    },
                    fontFamily: {
                        'teko': ['Teko', 'sans-serif'],
                        'inter': ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #fff; -webkit-tap-highlight-color: transparent; }
        
        /* Layout Mobile */
        #map-container { position: fixed; top: 0; left: 0; width: 100%; height: 35vh; z-index: 0; border-bottom: 2px solid #222; }
        #map { width: 100%; height: 100%; background: #111; }
        
        #content-scroll { 
            position: fixed; top: 35vh; left: 0; width: 100%; height: 65vh; 
            overflow-y: auto; background: #050505; z-index: 10; 
            padding-bottom: 120px; /* footer space */
        }

        .leaflet-tile-pane { filter: invert(100%) hue-rotate(180deg) brightness(85%) contrast(110%); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Pins */
        .pin-std { background: #000; color: #00f2ff; border: 2px solid #00f2ff; border-radius: 50%; text-align: center; font-weight: bold; font-size: 14px; line-height: 24px; box-shadow: 0 0 5px #00f2ff; }
        .pin-hotel { background: #ff0055; color: #fff; border: 1px solid #fff; border-radius: 4px; font-size: 18px; text-align: center; padding: 2px; z-index: 999; }
    </style>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>

<body x-data="app()" x-init="init()" class="bg-blackBg text-white h-screen w-screen overflow-hidden">

    <div id="map-container">
        <div id="map"></div>
        <div class="absolute top-3 left-3 z-[500] bg-black/80 backdrop-blur px-3 py-1 rounded border border-gray-700 pointer-events-none">
            <div class="text-[10px] text-gray-400">PLAN:</div>
            <div class="text-sm font-bold text-neonBlue" x-text="currentDayTitle"></div>
        </div>
    </div>

    <div id="content-scroll">
        <div class="p-2 space-y-3">
            
            <template x-for="day in days" :key="day.id">
                <div class="bg-cardBg rounded-xl overflow-hidden border border-gray-900 transition-all"
                     :class="activeDay === day.id ? 'border-neonBlue ring-1 ring-neonBlue/20' : ''">
                    
                    <div @click="setDay(day)" class="p-4 flex justify-between items-center cursor-pointer bg-gradient-to-r from-cardBg to-black active:bg-gray-900">
                        <div>
                            <div class="font-teko text-2xl text-white leading-none tracking-wide" x-text="day.date"></div>
                            <div class="text-[10px] font-bold text-gray-500 uppercase tracking-widest mt-1" x-text="day.title"></div>
                        </div>
                        <div class="text-neonBlue text-xl transform transition-transform" :class="activeDay === day.id ? 'rotate-90' : ''">‚û§</div>
                    </div>

                    <div x-show="activeDay === day.id" x-collapse class="bg-black/40 border-t border-gray-800">
                        
                        <div class="p-2 bg-gray-900/50 border-b border-gray-800 text-[11px] text-gray-300 flex items-center gap-2">
                             <span>üöá <b>Transport:</b></span>
                             <span x-text="day.transport"></span>
                        </div>

                        <template x-for="(task, i) in day.tasks" :key="i">
                            <div class="p-3 border-b border-gray-800/50 last:border-0 relative">
                                <div class="flex gap-3 items-start">
                                    <div class="flex-none w-6 h-6 rounded-full border border-gray-600 flex items-center justify-center text-xs text-gray-400 mt-0.5" x-text="i+1"></div>
                                    
                                    <div class="flex-1">
                                        <div class="flex justify-between">
                                            <div class="text-sm font-bold text-gray-200" :class="task.done ? 'line-through opacity-50' : ''" x-text="task.name"></div>
                                            <input type="checkbox" class="accent-neonBlue w-5 h-5 rounded cursor-pointer opacity-50 checked:opacity-100" x-model="task.done" @change="save()">
                                        </div>
                                        
                                        <div class="mt-2 p-2 rounded border border-dashed transition-colors duration-300"
                                             :class="foodMode === 'cheap' ? 'bg-green-900/10 border-green-800/50' : 'bg-gold/10 border-gold/30'">
                                            <div class="flex justify-between items-center mb-1">
                                                <span class="text-[9px] font-bold uppercase" 
                                                      :class="foodMode === 'cheap' ? 'text-neonGreen' : 'text-gold'"
                                                      x-text="foodMode === 'cheap' ? 'üå≠ BUDGET' : 'üíé LUXURY'"></span>
                                            </div>
                                            <div class="text-xs text-gray-400 italic">
                                                <span x-text="foodMode === 'cheap' ? task.cheapFood : task.richFood"></span>
                                            </div>
                                        </div>

                                        <button x-show="task.coords" @click="nav(task.coords)" class="mt-2 flex items-center gap-1 text-[10px] text-gray-500 hover:text-white">
                                            <span>üìç NAWIGUJ</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>

                        <div x-show="day.note" class="p-3 bg-blue-900/10 border-t border-gray-800 text-[10px] text-blue-300">
                            ‚ÑπÔ∏è <span x-text="day.note"></span>
                         </div>
                    </div>
                </div>
            </template>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 w-full bg-black/95 backdrop-blur border-t border-gray-800 p-3 z-50">
        <div class="flex gap-3">
            <button @click="foodMode = 'cheap'" 
                    class="flex-1 py-3 rounded-lg border font-bold text-xs tracking-widest transition-all"
                    :class="foodMode === 'cheap' ? 'bg-neonGreen text-black border-neonGreen shadow-[0_0_10px_#39ff14]' : 'bg-gray-900 text-gray-500 border-gray-700'">
                üå≠ TANIO
            </button>
            <button @click="foodMode = 'rich'" 
                    class="flex-1 py-3 rounded-lg border font-bold text-xs tracking-widest transition-all"
                    :class="foodMode === 'rich' ? 'bg-gold text-black border-gold shadow-[0_0_10px_#d4af37]' : 'bg-gray-900 text-gray-500 border-gray-700'">
                üíé DROGO
            </button>
        </div>
    </div>

    <script>
        function app() {
            return {
                map: null,
                layerGroup: null,
                activeDay: 'd1',
                currentDayTitle: 'Przylot',
                foodMode: 'cheap', 
                
                hotels: {
                    tokyo1: [35.6930, 139.7924], // Galicia
                    kyoto: [35.0080, 135.7700],  // Le Lion
                    tokyo2: [35.6650, 139.8700]  // Tomi (Edogawa approx)
                },

                // PE≈ÅNY PLAN Z PDF
                days: [
                    { 
                        id: 'd1', date: '22.03 (Niedz)', title: 'PRZYLOT', 
                        transport: 'Keisei Skyliner -> Taxi',
                        note: 'Dzie≈Ñ techniczny. Kupiƒá SUICA, wyp≈Çaciƒá jeniy.',
                        tasks: [
                            { name: 'Przylot NRT (20:00)', coords: [35.7719, 140.3906], cheapFood: 'Onigiri z 7-11', richFood: 'Room Service', done: false },
                            { name: 'Galicia Ryogoku (Check-in)', coords: [35.6930, 139.7924], cheapFood: 'Piwo Asahi z puchy', richFood: 'Whisky Yamazaki', done: false }
                        ]
                    },
                    { 
                        id: 'd2', date: '23.03 (Pon)', title: 'ASAKUSA & UENO', 
                        transport: 'Ginza Line / Taxi',
                        note: 'Zacznijcie od Senso-ji, potem Ueno.',
                        tasks: [
                            { name: 'Asahi Head Office (Z≈Çota Kupa)', coords: [35.7099, 139.8016], cheapFood: 'Fota z mostu', richFood: 'Piwo w Sky Room na g√≥rze', done: false },
                            { name: 'Sens≈ç-ji Temple', coords: [35.7147, 139.7966], cheapFood: 'Melonpan na Nakamise', richFood: 'Unagi (Wƒôgorz) obok ≈õwiƒÖtyni', done: false },
                            { name: 'Daikoku-yu Onsen', coords: [35.7077, 139.8056], cheapFood: 'Mleko po kƒÖpieli', richFood: '-', done: false },
                            { name: 'Park Ueno', coords: [35.7140, 139.7740], cheapFood: 'Street food Ameyoko', richFood: 'Kaiseki w parku', done: false },
                            { name: 'Yanaka Ginza', coords: [35.7275, 139.7645], cheapFood: 'Menchi Katsu (krokiet)', richFood: 'Tradycyjna herbaciarnia', done: false },
                            { name: 'Nezu Shrine', coords: [35.7202, 139.7607], cheapFood: '-', richFood: '-', done: false }
                        ]
                    },
                    { 
                        id: 'd3', date: '24.03 (Wt)', title: 'CENTRUM & AKIBA', 
                        transport: 'Oedo Line -> Yamanote',
                        tasks: [
                            { name: 'Tsukiji Hongan-ji', coords: [35.6667, 139.7717], cheapFood: '-', richFood: '-', done: false },
                            { name: 'Tsukiji Market', coords: [35.6654, 139.7706], cheapFood: 'Jajko na patyku (150y)', richFood: 'Sushi Dai (5000y)', done: false },
                            { name: 'Pa≈Çac Cesarski (Ogrody)', coords: [35.6851, 139.7527], cheapFood: 'Woda', richFood: '-', done: false },
                            { name: 'Caretta Shiodome (Widok)', coords: [35.6649, 139.7626], cheapFood: 'Widok za free', richFood: 'Kolacja na 46. piƒôtrze', done: false },
                            { name: 'Akihabara (Sklepy)', coords: [35.7022, 139.7741], cheapFood: 'PABLO Mini Tart', richFood: 'Figurki za 20k jen√≥w', done: false },
                            { name: 'Maid Cafe / Capybara Cafe', coords: [35.7000, 139.7715], cheapFood: 'Omi≈Ñ', richFood: 'Pakiet VIP z uszami kr√≥lika', done: false }
                        ]
                    },
                    { 
                        id: 'd4', date: '25.03 (≈ör)', title: 'WEST TOKYO HARDCORE', 
                        transport: 'Odakyu / Inokashira / Yamanote',
                        note: 'Intensywny dzie≈Ñ. Du≈ºo ≈Ça≈ºenia.',
                        tasks: [
                            { name: 'Gotokuji (Koty)', coords: [35.6482, 139.6483], cheapFood: '-', richFood: '-', done: false },
                            { name: 'Shimokitazawa', coords: [35.6607, 139.6673], cheapFood: 'Curry Pan', richFood: 'Hipsterska Kawa', done: false },
                            { name: 'Shibuya Crossing & Hachiko', coords: [35.6595, 139.7004], cheapFood: 'Genki Sushi', richFood: 'L\'Occitane Cafe (widok)', done: false },
                            { name: 'Shibuya Sky', coords: [35.6585, 139.7018], cheapFood: '-', richFood: 'Drink w The Roof', done: false },
                            { name: 'Harajuku (Takeshita/Meiji)', coords: [35.6710, 139.7030], cheapFood: 'Nale≈õnik', richFood: '-', done: false },
                            { name: 'Shinjuku: Cross Vision (Kot 3D)', coords: [35.6925, 139.7010], cheapFood: '-', richFood: '-', done: false },
                            { name: 'Kabukicho & Golden Gai', coords: [35.6938, 139.7035], cheapFood: 'Ramen w Omoide Yokocho', richFood: 'Bar Albatross (drinki)', done: false }
                        ]
                    },
                    { 
                        id: 'd5', date: '26.03 (Czw)', title: 'CHILL DAY', 
                        transport: 'Hibiya Line / Fukutoshin',
                        tasks: [
                            { name: 'Nakameguro (Hanami)', coords: [35.6443, 139.6990], cheapFood: 'Kawa z konbini', richFood: 'Szampan nad rzekƒÖ', done: false },
                            { name: 'Ikebukuro', coords: [35.7295, 139.7109], cheapFood: 'Gyoza', richFood: 'Pokemon Center (zakupy)', done: false }
                        ]
                    },
                    { 
                        id: 'd6', date: '27.03 (Pt)', title: 'WYCIECZKA', 
                        transport: 'JR Yokosuka / Enoden',
                        tasks: [
                            { name: 'Kamakura (Budda)', coords: [35.3168, 139.5361], cheapFood: 'Lody fioletowe', richFood: 'Obiad z widokiem', done: false },
                            { name: 'Enoshima', coords: [35.3016, 139.4814], cheapFood: 'Tako Senbei', richFood: 'Shirasu-don', done: false },
                            { name: 'Yokohama', coords: [35.4439, 139.6462], cheapFood: 'Piero≈ºki Chinatown', richFood: 'Landmark Tower', done: false }
                        ]
                    },
                    { 
                        id: 'd7', date: '28.03 (Sob)', title: 'MOVE TO KYOTO', 
                        transport: 'Shinkansen -> Taxi',
                        note: 'Check-out z Galicia, Check-in Le Lion d\'or',
                        tasks: [
                            { name: 'Kiyomizu-dera', coords: [34.9948, 135.7850], cheapFood: 'Ciastko', richFood: 'Tofu Ryori', done: false },
                            { name: 'Sannenzaka & Ninenzaka', coords: [34.9972, 135.7824], cheapFood: '-', richFood: 'Kawa w Starbucks (Tatami)', done: false },
                            { name: 'Gion & Shirakawa', coords: [35.0054, 135.7745], cheapFood: 'Ramen', richFood: 'Kaiseki z GejszƒÖ', done: false }
                        ]
                    },
                    { 
                        id: 'd8', date: '29.03 (Niedz)', title: 'FUSHIMI INARI', 
                        transport: 'Keihan Line / JR Nara Line',
                        note: 'Bardzo rano!',
                        tasks: [
                            { name: 'Fushimi Inari Taisha', coords: [34.9671, 135.7726], cheapFood: 'Kitsune Udon', richFood: 'Herbata na szczycie', done: false },
                            { name: 'Spacer Wieczorny', coords: [35.0037, 135.7710], cheapFood: 'Pontocho (bary)', richFood: 'Kamo River Dining', done: false }
                        ]
                    },
                    { 
                        id: 'd9', date: '30.03 (Pon)', title: 'GINKAKU-JI', 
                        transport: 'Bus 17 / Taxi',
                        tasks: [
                            { name: 'Ginkaku-ji', coords: [35.0268, 135.7982], cheapFood: 'Lody Matcha', richFood: '-', done: false },
                            { name: 'Philosopher\'s Path', coords: [35.0230, 135.7950], cheapFood: 'Spacer', richFood: 'Cafe Terrazza', done: false },
                            { name: 'Sanj≈´sangen-d≈ç', coords: [34.9878, 135.7717], cheapFood: '-', richFood: '-', done: false }
                        ]
                    },
                    { 
                        id: 'd10', date: '31.03 (Wt)', title: 'NARA', 
                        transport: 'Kintetsu Line',
                        tasks: [
                            { name: 'Nara Park (Jelonki)', coords: [34.6850, 135.8430], cheapFood: 'Krakersy dla jeleni', richFood: 'Kakinoha Sushi', done: false },
                            { name: 'T≈çdai-ji', coords: [34.6889, 135.8398], cheapFood: '-', richFood: '-', done: false }
                        ]
                    },
                    { 
                        id: 'd11', date: '01.04 (≈ör)', title: 'POWR√ìT TOKIO', 
                        transport: 'Shinkansen -> Taxi',
                        note: 'Check-in TOMI Hotel.',
                        tasks: [
                            { name: 'Powr√≥t do Tokio', coords: [35.6812, 139.7671], cheapFood: 'Bento dworcowe', richFood: 'Green Car Shinkansen', done: false }
                        ]
                    },
                    { 
                        id: 'd12', date: '02.04 - 06.04', title: 'FREE TIME', 
                        transport: 'Wszƒôdzie',
                        tasks: [
                            { name: 'Zakupy / Don Quijote', coords: null, cheapFood: 'KitKaty', richFood: 'Sake', done: false },
                            { name: 'Wylot (06.04)', coords: [35.7719, 140.3906], cheapFood: '-', richFood: 'Business Class', done: false }
                        ]
                    }
                ],

                init() {
                    this.map = L.map('map', {zoomControl: false}).setView([35.693, 139.792], 12);
                    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                        attribution: '', maxZoom: 19
                    }).addTo(this.map);
                    this.layerGroup = L.layerGroup().addTo(this.map);
                    
                    const saved = localStorage.getItem('jp_v12_full');
                    if(saved) {
                        const parsed = JSON.parse(saved);
                        this.days.forEach((d, di) => {
                            if(parsed[di]) d.tasks.forEach((t, ti) => {
                                if(parsed[di].tasks[ti]) t.done = parsed[di].tasks[ti].done;
                            });
                        });
                    }
                    this.setDay(this.days[0]);
                },

                setDay(day) {
                    this.activeDay = day.id;
                    this.currentDayTitle = day.title;
                    this.renderMap(day);
                },

                renderMap(day) {
                    this.layerGroup.clearLayers();
                    const bounds = [];
                    
                    // Hotel
                    let hotelCoords = this.hotels.tokyo1;
                    if(['d7','d8','d9','d10'].includes(day.id)) hotelCoords = this.hotels.kyoto;
                    if(['d11','d12'].includes(day.id)) hotelCoords = this.hotels.tokyo2;

                    L.marker(hotelCoords, {icon: L.divIcon({html: 'üè®', className: 'pin-hotel'})}).addTo(this.layerGroup);
                    bounds.push(hotelCoords);

                    // Tasks
                    day.tasks.forEach((t, i) => {
                        if(t.coords) {
                            L.marker(t.coords, {
                                icon: L.divIcon({html: i+1, className: 'pin-std', iconSize:[24,24]})
                            }).addTo(this.layerGroup);
                            bounds.push(t.coords);
                        }
                    });

                    if(bounds.length > 0) {
                        this.map.flyToBounds(bounds, {padding: [50, 50], duration: 1});
                    }
                },

                nav(coords) {
                    window.open(`https://www.google.com/maps/dir/?api=1&destination=${coords[0]},${coords[1]}&travelmode=transit`, '_blank');
                },

                save() {
                    localStorage.setItem('jp_v12_full', JSON.stringify(this.days));
                }
            }
        }
    </script>
</body>
</html>
